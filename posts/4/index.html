
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>GUIDE</title>
  <meta name="author" content="Wei Luo">

  
  <meta name="description" content="Reference: http://stackoverflow.com/questions/1338728/delete-commits-from-a-branch-in-git Careful: git reset --hard WILL DELETE YOUR WORKING &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://weilluo.github.io/posts/4/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="GUIDE" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

<!-- https://github.com/dongweiming/octopress-wp_cumulus_for_tagcloud -->
<link rel="stylesheet" type="text/css" href="/stylesheets/calendar.css">
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="/javascripts/swfobject.js"></script>
<script type="text/javascript" src="/javascripts/tagcumulus.js"></script>
<script type="text/javascript" src="/javascripts/calendar.js"></script>

<!-- font awesome -->
<link rel="stylesheet" type="text/css" href="/stylesheets/font-awesome.min.css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">GUIDE</a></h1>
  
    <h2>The road ahead will be long and our climb will be steep</h2>
  
</hgroup>

</header>
  <nav role="navigation">
<ul class="subscription" data-subscription="rss">
  <li>
    <!-- <a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a> -->
    <a href="/atom.xml" title="subscribe via RSS">
      <i class="fa fa-rss" aria-hidden="true"></i>
    </a>
  </li>
  
</ul>



<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="weilluo.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>


<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/changelog">News Log</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/06/30/delete-commits-from-a-branch-in-git/">Delete Commits From a Branch in Git</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-06-30T17:34:07+08:00'><span class='date'>2015-06-30</span> <span class='time'>5:34 pm</span></time>
        
           | <a href="/blog/2015/06/30/delete-commits-from-a-branch-in-git/#disqus_thread"
             data-disqus-identifier="http://weilluo.github.io/blog/2015/06/30/delete-commits-from-a-branch-in-git/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Reference: <a href="http://stackoverflow.com/questions/1338728/delete-commits-from-a-branch-in-git">http://stackoverflow.com/questions/1338728/delete-commits-from-a-branch-in-git</a></p>

<p><strong>Careful</strong>: <code>git reset --hard</code> WILL DELETE YOUR WORKING DIRECTORY CHANGES. Be sure to <strong>stash any local changes you want to keep</strong> before running this command.</p>

<p>Assuming you are sitting on that commit, then this command will wack it…</p>
<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class=""><span class="line">git reset --hard HEAD~1</span></code></pre></td></tr></table></div></figure></notextile></div>
<p>The <code>HEAD~1</code> means the commit before head.</p>

<p>Or, you could look at the output of <code>git log</code>, find the commit id of the commit you want to back up to, and then do this:</p>
<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class=""><span class="line">git reset --hard &lt;sha1-commit-id&gt;</span></code></pre></td></tr></table></div></figure></notextile></div>
<hr />
<p>If you already pushed it, you will need to do a force push to get rid of it…</p>
<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class=""><span class="line">git push origin HEAD --force</span></code></pre></td></tr></table></div></figure></notextile></div>
<p><strong>However</strong>, if others may have pulled it, then you would be better off starting a new branch. Because when they pull, it will just merge it into their work, and you will get it pushed back up again.</p>

<p>If you already pushed, it may be better to use <code>git revert</code>, to create a “mirror image” commit that will undo the changes. However, both commits will both be in the log.</p>

<hr />

<p>FYI – <code>git reset --hard HEAD</code> is great if you want to get rid of WORK IN PROGRESS. It will reset you back to the most recent commit, and erase all the changes in your working tree and index.</p>

<hr />

<p>Lastly, if you need to find a commit that you “deleted”, it is typically present in <code>git reflog</code> unless you have garbage collected your repository.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/06/29/my-sublime-custom-config/">My Sublime Custom Config</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-06-29T21:13:46+08:00'><span class='date'>2015-06-29</span> <span class='time'>9:13 pm</span></time>
        
           | <a href="/blog/2015/06/29/my-sublime-custom-config/#disqus_thread"
             data-disqus-identifier="http://weilluo.github.io/blog/2015/06/29/my-sublime-custom-config/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><ul>
  <li>User Preference:</li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
</pre></td><td class="code"><pre><code class=""><span class="line">{
</span><span class="line">  "color_scheme": "Packages/Theme - Cobalt2/cobalt2.tmTheme",
</span><span class="line">  "font_face": "Yahei Consolas Hybrid",
</span><span class="line">  "font_size": 12,
</span><span class="line">  "save_on_focus_lost": true,
</span><span class="line">  "tab_size": 2,
</span><span class="line">  "theme": "Cobalt2.sublime-theme",
</span><span class="line">  "translate_tabs_to_spaces": true,
</span><span class="line">  "trim_trailing_white_space_on_save": true,
</span><span class="line">  // "tmp/*.tmp" is for ember-cli project
</span><span class="line">  "folder_exclude_patterns": [".svn", ".git", ".hg", "CVS", "tmp/*.tmp"]
</span><span class="line">}</span></code></pre></td></tr></table></div></figure></notextile></div>

<ul>
  <li>User Key Bindings</li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class=""><span class="line">[
</span><span class="line">  { "keys": ["command+shift+f"], "command": "reindent"}
</span><span class="line">]</span></code></pre></td></tr></table></div></figure></notextile></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/05/18/clear-watchman-watch-list/">Clear Watchman Watch-list</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-05-18T18:22:09+08:00'><span class='date'>2015-05-18</span> <span class='time'>6:22 pm</span></time>
        
           | <a href="/blog/2015/05/18/clear-watchman-watch-list/#disqus_thread"
             data-disqus-identifier="http://weilluo.github.io/blog/2015/05/18/clear-watchman-watch-list/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Watchman: <a href="https://github.com/facebook/watchman">https://github.com/facebook/watchman</a></p>

<ul>
  <li>create file <code>clear_watchman_list.rb</code> in <code>HOME</code> folder.</li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="nb">require</span> <span class="s1">&#39;json&#39;</span>
</span><span class="line">
</span><span class="line"><span class="n">result</span> <span class="o">=</span> <span class="no">JSON</span><span class="o">.</span><span class="n">parse</span> <span class="sx">%x{watchman watch-list}</span>
</span><span class="line"><span class="n">result</span><span class="o">[</span><span class="s2">&quot;roots&quot;</span><span class="o">].</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">dir</span><span class="o">|</span>
</span><span class="line">  <span class="nb">system</span> <span class="s2">&quot;watchman watch-del </span><span class="si">#{</span><span class="n">dir</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<ul>
  <li>define <code>cwl</code> command in <code>.profile</code></li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="c"># clear watchman list</span>
</span><span class="line"><span class="nb">alias </span><span class="nv">cwl</span><span class="o">=</span><span class="s2">&quot;ruby $HOME/clear_watchman_list.rb&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<ul>
  <li>use <code>cwl</code> if we want to empty the watchman list.</li>
</ul>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/05/07/swap-space-for-aws-ubuntu-server/">Swap Space for Aws Ubuntu Server</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-05-07T13:20:52+08:00'><span class='date'>2015-05-07</span> <span class='time'>1:20 pm</span></time>
        
           | <a href="/blog/2015/05/07/swap-space-for-aws-ubuntu-server/#disqus_thread"
             data-disqus-identifier="http://weilluo.github.io/blog/2015/05/07/swap-space-for-aws-ubuntu-server/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>It’s very <code>important</code>!!!</p>

<p>Swap will auto release (or free) the unused memory.</p>

<p>We setup an <code>jenkins</code> ci server, run functional test on firefox use xvfb. After some hours, the memory is almost full.</p>

<p>So we add swap to our ci server.</p>

<p>Example: <a href="https://www.digitalocean.com/community/tutorials/how-to-add-swap-on-ubuntu-14-04">https://www.digitalocean.com/community/tutorials/how-to-add-swap-on-ubuntu-14-04</a></p>

<p>Reference:</p>

<p><a href="http://stackoverflow.com/questions/29764181/jenkins-email-ext-plugin-pre-send-scripts">http://stackoverflow.com/questions/29764181/jenkins-email-ext-plugin-pre-send-scripts</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/05/06/setup-jdk-environment/">Setup JDK Environment</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-05-06T10:13:40+08:00'><span class='date'>2015-05-06</span> <span class='time'>10:13 am</span></time>
        
           | <a href="/blog/2015/05/06/setup-jdk-environment/#disqus_thread"
             data-disqus-identifier="http://weilluo.github.io/blog/2015/05/06/setup-jdk-environment/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="c"># set jdk environment</span>
</span><span class="line"><span class="nb">export </span><span class="nv">JAVA_HOME</span><span class="o">=</span><span class="s2">&quot;/home/jenkins/Development/jdk1.8.0_40&quot;</span>
</span><span class="line"><span class="nb">export </span><span class="nv">CLASSPATH</span><span class="o">=</span><span class="s2">&quot;.:$JAVA_HOME/lib/:$JAVA_HOME/jre/lib:$CLASSPATH&quot;</span>
</span><span class="line"><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;$JAVA_HOME/bin:$JAVA_HOME/jre/bin:$PATH&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/5">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/3">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2018/02/07/angular-aot/">Angular Need Aot</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/06/02/nodejs-best-practices/">Nodejs Best Practices</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/05/06/mock-a-method-when-test-express-api/">Mock a Method When Test Express Api</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/04/26/difference-between-config-and-run-in-angular/">Difference Between Config and Run in Angular</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/04/15/s3-policy-on-ec2-having-changes-between-ecs-and-eb/">S3 Policy on EC2 Having Changes Between ECS and EB</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Categories</h1>
  <div id="category-list"><li><a href='/blog/categories/angular/'>ANGULAR (1)</a></li><li><a href='/blog/categories/aws/'>AWS (2)</a></li><li><a href='/blog/categories/css/'>CSS (1)</a></li><li><a href='/blog/categories/disqus/'>DISQUS (1)</a></li><li><a href='/blog/categories/es6/'>ES6 (1)</a></li><li><a href='/blog/categories/git/'>GIT (2)</a></li><li><a href='/blog/categories/javascript/'>JAVASCRIPT (2)</a></li><li><a href='/blog/categories/jenkins/'>JENKINS (1)</a></li><li><a href='/blog/categories/mac/'>MAC (2)</a></li><li><a href='/blog/categories/mongodb/'>MONGODB (1)</a></li><li><a href='/blog/categories/nodejs/'>NODEJS (1)</a></li><li><a href='/blog/categories/rails/'>RAILS (2)</a></li><li><a href='/blog/categories/react/'>REACT (1)</a></li><li><a href='/blog/categories/ruby/'>RUBY (4)</a></li><li><a href='/blog/categories/shell/'>SHELL (2)</a></li><li><a href='/blog/categories/sinatra/'>SINATRA (1)</a></li><li><a href='/blog/categories/sublime/'>SUBLIME (1)</a></li><li><a href='/blog/categories/swap/'>SWAP (1)</a></li><li><a href='/blog/categories/test/'>TEST (2)</a></li><li><a href='/blog/categories/ubuntu/'>UBUNTU (2)</a></li><li><a href='/blog/categories/watchman/'>WATCHMAN (1)</a></li><li><a href='/blog/categories/shua-ji/'>刷机 (1)</a></li></div>
</section>
<section>
  <h1>
    <i class="fa fa-tags" aria-hidden="true"></i> Tags
  </h1>
  <div id="tag-list"><li><a href='/blog/tags/angular/'>angular (1)</a></li><li><a href='/blog/tags/aws/'>aws (2)</a></li><li><a href='/blog/tags/css/'>css (1)</a></li><li><a href='/blog/tags/disqus/'>disqus (1)</a></li><li><a href='/blog/tags/es6/'>es6 (1)</a></li><li><a href='/blog/tags/git/'>git (2)</a></li><li><a href='/blog/tags/javascript/'>javascript (2)</a></li><li><a href='/blog/tags/jenkins/'>jenkins (1)</a></li><li><a href='/blog/tags/mac/'>mac (2)</a></li><li><a href='/blog/tags/mongodb/'>mongodb (1)</a></li><li><a href='/blog/tags/nodejs/'>nodejs (1)</a></li><li><a href='/blog/tags/rails/'>rails (2)</a></li><li><a href='/blog/tags/react/'>react (1)</a></li><li><a href='/blog/tags/ruby/'>ruby (4)</a></li><li><a href='/blog/tags/shell/'>shell (2)</a></li><li><a href='/blog/tags/sinatra/'>sinatra (1)</a></li><li><a href='/blog/tags/sublime/'>sublime (1)</a></li><li><a href='/blog/tags/swap/'>swap (1)</a></li><li><a href='/blog/tags/test/'>test (2)</a></li><li><a href='/blog/tags/ubuntu/'>ubuntu (2)</a></li><li><a href='/blog/tags/watchman/'>watchman (1)</a></li><li><a href='/blog/tags/shua-ji/'>刷机 (1)</a></li></div>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2018 - Wei Luo -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

<p id="back-top">
  <a href="#top"><span></span>Back to Top</a>
</p>
<style type="text/css">
  #back-top {
    position: fixed;
    bottom: 50px;
    right: 30px;
    display: none;
  }

  #back-top a {
    width: 40px;
    display: block;
    text-align: center;
    font: 9px Arial, Helvetica, sans-serif;
    text-transform: uppercase;
    text-decoration: none;
    color: #bbb;

    /* transition */
    -webkit-transition: 1s;
    -moz-transition: 1s;
    transition: 1s;
  }

  /* arrow icon (span tag) */
  #back-top span {
    width: 40px;
    height: 40px;
    display: block;
    margin-bottom: 7px;
    background: #ddd url(/images/up-arrow.png) no-repeat center center;
    background-size: 40px 40px;

    /* rounded corners */
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;

    /* transition */
    -webkit-transition: 1s;
    -moz-transition: 1s;
    transition: 1s;
  }

  @media only screen and (min-width: 768px) {
    #back-top span {
      width: 60px;
      height: 60px;
      background-size: 60px 60px;
      -webkit-border-radius: 10px;
      -moz-border-radius: 10px;
      border-radius: 10px
    }
    #back-top a {
      width: 60px;
      font-size: 10px
    }
  }
  @media only screen and (min-width: 960px) {
    #back-top span {
      width: 80px;
      height: 80px;
      background-size: 80px 80px;
      -webkit-border-radius: 15px;
      -moz-border-radius: 15px;
      border-radius: 15px
    }
    #back-top a {
      width: 80px;
      font-size: 11px;
    }
  }
</style>
<script type="text/javascript">
  $(document).ready(function(){
    // hide #back-top first
    // $("#back-top").hide();

    // fade in #back-top
    $(function () {
        $(window).scroll(function () {
            if ($(this).scrollTop() > 100) {
                $('#back-top').fadeIn();
            } else {
                $('#back-top').fadeOut();
            }
        });

        // scroll body to 0px on click
        $('#back-top a').click(function () {
            $('body,html').animate({
                scrollTop: 0
            }, 800);
            return false;
        });
    });
  });
</script>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'luoguanzhong';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
